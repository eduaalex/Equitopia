<odoo>
  <data>
    <record model="ir.ui.view" id="maintenance_view_team_corrected">
      <field name="model">maintenance.team</field>
      <field name="inherit_id" ref="maintenance.maintenance_team_view_tree" />
      <field name="arch" type="xml">
        <xpath expr="//field[@name='company_id']" position="attributes">
          <attribute name="invisible">1</attribute>
        </xpath>
        <field name="member_ids" position="after">
          <field name="partner_id" />
        </field>
      </field>
    </record>

    <record model="ir.ui.view" id="account_asset_custom_maintenance1">
      <field name="model">account.asset.asset</field>
      <field name="inherit_id" ref="om_account_asset.view_account_asset_asset_form" />
      <field name="arch" type="xml">
        <!-- Campos ocultos -->
        <xpath expr="//page[@name='occupancy']" position="attributes">
          <attribute name="invisible">1</attribute>
        </xpath>
        <xpath expr="//field[@name='ground_rent']" position="attributes">
          <attribute name="invisible">1</attribute>
        </xpath>
        <xpath expr="//field[@name='rent_type_id']" position="attributes">
          <attribute name="invisible">1</attribute>
        </xpath>

        <xpath expr="//field[@name='currency_id']" position="after">
          <field name="commission_value" />
          <field name="commission_percentage" />
        </xpath>

        <!-- Boton de nuevo contrato -->
        <xpath expr="//button[@name='open_url']" position="after">
          <button name="create_tenancy" string="Nuevo contrato" type="object" icon="fa-edit" class="oe_stat_button" />
        </xpath>

        <!-- Mantenimientos por propiedad -->

        <xpath expr="//page[@name='sub_properties']" position="before">
          <page name="maintenance_by_property_page" string="Mantenimiento">
            <field name="maintenance_per_property" domain="[('is_for_tenant', '=', 'False')]">
              <tree string="Mantenimientos de la propiedad">
                <field name="name" />
                <field name="team_id" />
                <field name="frequency" />
                <field name="cost" />
                <field name="to_charge" />
                <field name="is_service" />
              </tree>
              <form string="Mantenimientos de la propiedad">
                <group>
                  <field name="name" />
                  <field name="team_id" />
                  <field name="frequency" />
                  <field name="cost" />
                  <field name="to_charge" />
                  <field name="is_service" />
                </group>
              </form>
            </field>
          </page>
        </xpath>

        <xpath expr="//field[@name='current_tenant_id']" position="attributes">
          <attribute name="default_order">ten_date</attribute>
        </xpath>

        <!--
        <xpath expr="//page[@name='photos']" position='after'>
          <page name="comisiones" string="Comisiones">
            <field name="commission_ids">
              <tree string="Comisiones">
                <field name="commission_value" />
                <field name="commission_percentage" />
              </tree>
              <form string="Comisiones">
                <group>
                  <field name="commission_value" />
                  <field name="commission_percentage" />
                </group>
              </form>
            </field>
          </page>
        </xpath>
        -->

      </field>

    </record>

    <record model="ir.ui.view" id="account_analytic_saul_maintenance1">
      <field name="model">account.analytic.account</field>
      <field name="inherit_id" ref="property_management.property_analytic_view_form" />
      <field name="arch" type="xml">

        <!-- Mantenimientos por propiedad -->
        <field name="rent_type_id" position="after">
          <field name="frequency" />
          <field name="mirror_contract_id" readonly="1" context="{'form_view_ref': 'property_landlord_management.landlord_analytic_view_form_id'}" string="Contrato del propietario" />
          <field name="commission_value" readonly="1" />
          <field name="commission_percentage" readonly="1" />
        </field>

        <xpath expr="//page[@name='history']" position="before">
          <page name="tenant_maintenance_page" string="Mantenimientos">
            <field name="maintenance_per_property" readonly="0">
              <tree string="Mantenimientos">
                <field name="name" string="Nombre" />
                <field name="team" string="Equipo" />
                <field name="frequency" />
                <field name="cost" string="Costo" />
                <field name="charge" />
                <field name="category" />
              </tree>
            </field>
          </page>
        </xpath>

        <!-- Propiedades disponibles -->
        <xpath expr="//field[@name='property_id']" position="attributes">
          <attribute name="domain">[]</attribute>
        </xpath>
        <xpath expr="//field[@name='rent_type_id']" position="attributes">
          <attribute name="required">0</attribute>
        </xpath>

        <!-- Contrato espejo -->
        <!--<xpath 
          <xpath expr="//button[@name='button_maintenance']" position="after">
          <button name="mirror_contract" string="Contrato espejo" type="object"/>
          </xpath>
        -->

        <!-- Campos ocultos -->
        <xpath expr="//field[@name='rent']" position="attributes">
          <attribute name="invisible">1</attribute>
        </xpath>
        <xpath expr="//field[@name='date']" position="attributes">
          <attribute name="invisible">1</attribute>
        </xpath>
        <xpath expr="//field[@name='date_start']" position="attributes">
          <attribute name="invisible">1</attribute>
        </xpath>
        <xpath expr="//field[@name='rent_type_id']" position="attributes">
          <attribute name="invisible">1</attribute>
        </xpath>

      </field>
    </record>

    <record model="ir.ui.view" id="account_anlytic_landlord_custom_maintenance">
      <field name="model">account.analytic.account</field>
      <field name="inherit_id" ref="property_landlord_management.landlord_analytic_view_form_id" />
      <field name="arch" type="xml">

        <xpath expr="//field[@name='rent_type_id']" position="attributes">
          <attribute name="required">0</attribute>
        </xpath>

        <!-- Mantenimientos por propiedad -->
        <field name="rent_type_id" position="after">
          <field name="frequency" />
        </field>
        <field name="deposit_scheme_type" position="after">
          <field name="tenant_tenancy_id" readonly="1" string="Contrato del inquilino" context="{'form_view_ref': 'property_management.property_analytic_view_form'}" />
        </field>

        <xpath expr="//page[@name='history']" position="before">
          <page name="tenant_maintenance_page" string="Mantenimientos">
            <field name="maintenance_per_property" readonly="0">
              <tree string="Mantenimientos">
                <field name="name" string="Nombre" />
                <field name="team" string="Equipo" />
                <field name="frequency" />
                <field name="cost" string="Costo" />
                <field name="charge" />
                <field name="category" />
              </tree>
            </field>
          </page>
        </xpath>

      </field>
    </record>

    <record model="ir.ui.view" id="account_payment_modified">
      <field name="model">account.payment</field>
      <field name="inherit_id" ref="account.view_account_payment_invoice_form" />
      <field name="arch" type="xml">
        <xpath expr="//field[@name='calc_balance']" position="after">
          <field name="payment_type" invisible="0" />
          <field name="partner_type" invisible="0" />
          <field name="partner_id" invisible="0" />
        </xpath>
      </field>
    </record>

    <record model="ir.ui.view" id="analytic_comissions_view">
      <field name="model">account.analytic.account</field>
      <field name="name">analytic.comissions.custom</field>
      <field name="arch" type="xml">
        <tree string="Comisiones">
          <field name="id" />
          <field name="code"/>
          <field name="property_id" />
          <field name="ten_date" />
          <field name="commission_value" />
          <field name="commission_percentage" />
          <field name="rent_schedule_ids" />
          <field name="rent_payment" />
          <button type="object" string="" name="open_payment" icon="gtk-nekt" attrs="{'invisible': [('rent_payment','=','False')]}"/>
        </tree>
      </field>
    </record>

    <!-- Menus -->
    <record id="action_commission_custom" model="ir.actions.act_window">
      <field name="name">Comisiones (por contrato)</field>
      <field name="type">ir.actions.act_window</field>
      <field name="res_model">account.analytic.account</field>
      <field name="view_mode">tree</field>
      <field name="view_id" ref="analytic_comissions_view" />
    </record>

    <menuitem 
      id="menu_commission_custom"
      name="Comisiones por contrato"
      parent="property_commission.menu_commissions" 
      action="action_commission_custom"
      />
   
  </data>
</odoo>
